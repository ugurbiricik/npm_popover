{
  "_entries": [
    {
      "name": "ui5_bfsg_popover",
      "path": "/home/user/projects/ui5_BFSG_Popover/package/index.js",
      "lastModified": 1736433161399,
      "type": "module",
      "code": "sap.ui.define(['sap/ui/model/json/JSONModel', 'sap/ui/core/Fragment', 'sap/m/MessageToast'], (function (require$$0, require$$1, require$$2) { 'use strict';\n\n  const JSONModel = require$$0;\n  const Fragment = require$$1;\n  const MessageToast = require$$2;\n\n  class BFSG_Popover {\n      constructor(view, control) {\n          this.view = view;\n          this.control = control;\n\n          this.genConfigModel();\n          this.buildPopover();\n          this.attachPress();\n          this.fetchStyle();\n\n\n          this._mouseHoverHandler = this._onMouseHoverRead.bind(this);\n          this._oSpeechSynth = window.speechSynthesis;\n          this._oUtterance = null;\n\n      }\n\n      genConfigModel () {\n          this.configModel = new JSONModel({\n              \"fontConfig\": {\n                  fontSize: 16,\n                  contrastMode: false\n              },\n              \"contrastConfig\": {\n                  backgroundColor: \"white\",\n                  textColor: \"black\",\n                  previewBackgroundColor: \"white\",\n                  previewTextColor: \"black\"    \n              },\n              \"blueFilterConfig\": {\n                  blueFilterActive: false,\n                  blueFilterIntensity: 32,\n                  blaufilterExpanded: true    \n              },\n              \"readWebsiteConfig\": {\n                  speed: 1.0,\n                  volume: 40,\n                  isPlaying: false,\n                  isPaused: false,\n                  currentText: \"\",\n                  mouseReadingActive: false,\n                  lastReadElement: null    \n              }\n          });\n\n          this.view.setModel(this.configModel, \"configModel\");\n      }\n\n      changeFontSize(event) {\n          const size = this.getValue();\n          document.documentElement.style.fontSize = `${size}px`;\n      }\n      \n\n      updateFontSize (oModel, oView, action) {\n          const currentSize = oModel.getProperty(\"/fontConfig/fontSize\");\n          let newSize = currentSize;\n\n          if (action === \"increase\" && currentSize < 40) {\n              newSize += 2;\n          } else if (action === \"decrease\" && currentSize > 10) {\n              newSize -= 2;\n          } else if (action === \"reset\") {\n              newSize = 16;\n          }\n\n          oModel.setProperty(\"/fontConfig/fontSize\", newSize);\n          this.applyFontSizeToView(oView, newSize);\n      }\n\n      applyFontSizeToView (oView, fontSize) {\n          oView.findAggregatedObjects(true, (oControl) => {\n              const oDomRef = oControl.getDomRef();\n              if (oDomRef) {\n                  oDomRef.style.fontSize = fontSize + \"px\";\n                  this.updateChildFontSize(oDomRef, fontSize);\n              }\n              return false;\n          });\n      }\n      \n      updateChildFontSize (domElement, fontSize) {\n          const childNodes = domElement.querySelectorAll(\"*\");\n          childNodes.forEach((child) => {\n              child.style.fontSize = fontSize + \"px\";\n          });\n      }\n\n      onButtonFontSizeChangePress (action) {\n          this.updateFontSize(this.configModel, this.view, action);\n      }\n\n      attachPress() {\n          this.control.attachPress(this.open, this);\n      }\n\n      async buildPopover() {\n          const popover = await Fragment.load({\n              name: \"ui5_bfsg_popover.popover\",\n              controller: this\n          });\n          this.popover = popover;\n          this.view.addDependent(this.popover);\n      }\n\n      fetchStyle () {\n          let link = document.createElement('link');\n          link.rel = 'stylesheet';\n          link.type = 'text/css';\n          link.href = 'resources/ui5_bfsg_popover/bfsg_style.css';\n      \n          let headScript = document.querySelector('script');\n          headScript.parentNode.insertBefore(link, headScript);\n      };\n\n\n      open(event) {        \n          this.popover.openBy(event.getSource());\n      }\n\n    \n\n      // Font Size Begin\n\n    \n\n\n      closePopover() {\n          this.popover.close();\n      }\n\n      // Popover Open Begin\n\n      onReadWebsiteButtonPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5._bfsg_popover.view.fragments.readwebsite\", \"_pReadWebsitePopover\");\n      }\n\n      onMoreColorsButtonPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5_bfsg_popover.view.fragments.morecolors\", \"_oMoreColorsPopover\");\n      }\n              \n      onImageAccessPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5_bfsg_popover.view.fragments.accesspopover\", \"_oPopover\");\n      }\n\n      onButtonSettingsPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5_bfsg_popover.view.fragments.settings\", \"_pSettingsPopover\");\n      }\n\n      onButtonInfoPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5_bfsg_popover.view.fragments.info\", \"_pInfoPopover\");\n      }\n\n      onInstantViewButtonPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5_bfsg_popover.view.fragments.instantview\", \"_pInstantViewPopover\");\n      }\n\n\n      onTabNavigationButtonPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5_bfsg_popover.view.fragments.tabnavigation\", \"_pTabNavigationPopover\");\n      }\n\n      onColorBlindnessButtonPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5_bfsg_popover.view.fragments.colorblindness\", \"_pColorBlindnessPopover\");\n      }\n\n      onHideImagesButtonPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5_bfsg_popover.view.fragments.hideimages\", \"_pHideImagesPopover\");\n      }\n\n      onMoreFeaturesButtonPress(oEvent) {\n          this.handlePopover(oEvent, this.view, \"ui5_bfsg_popover.view.fragments.morefeatures\", \"_pMoreFeaturesPopover\");\n      }\n\n      handlePopover(oEvent, oView, fragmentName, popoverKey) {\n          if (!this[popoverKey]) {\n              this[popoverKey] = Fragment.load({\n                  id: oView.getId(),\n                  name: fragmentName,\n                  controller: oView.getController()\n              })\n              .then(function (oPopover) {\n                  oView.addDependent(oPopover);\n                  return oPopover;\n              }.bind(this))\n              .catch(function (err) {\n                  console.error(\"Fragment yüklenirken hata oluştu:\", err);\n              });\n          }\n          this[popoverKey].then(function (oPopover) {\n              if (oPopover) {\n                  oPopover.openBy(oEvent.getSource());\n              } else {\n                  console.error(\"Popover yüklenemedi veya bulunamadı.\");\n              }\n          });\n      }\n\n      // Popover Open End\n\n      //Contrast Mode Begin\n\n      onContrastModeButtonPress(event) {\n          const model = this.view.getModel(\"configModel\");\n          const isExpanded = model.getProperty(\"/kontrastmodusExpanded\");\n          model.setProperty(\"/kontrastmodusExpanded\", !isExpanded);\n      }\n\n      onButtonBackgroundBlackPress() {\n          this.updatePreviewStyle(\"black\", null);\n      }\n      \n      onButtonBackgroundWhitePress() {\n          this.updatePreviewStyle(\"white\", null);\n      }\n      \n      onButtonBackgroundRedPress() {\n          this.updatePreviewStyle(\"red\", null);\n      }\n      \n      onButtonBackgroundYellowPress() {\n          this.updatePreviewStyle(\"yellow\", null);\n      }\n      \n      onButtonBackgroundGreenPress() {\n          this.updatePreviewStyle(\"green\", null);\n      }\n      \n      onButtonBackgroundBluePress() {\n          this.updatePreviewStyle(\"blue\", null);\n      }\n      \n      onButtonTextBlackPress() {\n          this.updatePreviewStyle(null, \"black\");\n      }\n      \n      onButtonTextWhitePress() {\n          this.updatePreviewStyle(null, \"white\");\n      }\n      \n      onButtonTextRedPress() {\n          this.updatePreviewStyle(null, \"red\");\n      }\n      \n      onButtonTextYellowPress() {\n          this.updatePreviewStyle(null, \"yellow\");\n      }\n      \n      onButtonTextGreenPress() {\n          this.updatePreviewStyle(null, \"green\");\n      }\n      \n      onButtonTextBluePress() {\n          this.updatePreviewStyle(null, \"blue\");\n      }\n      \n      updatePreviewStyle(backgroundColor, textColor) {\n          const previewText = document.getElementById(\"idCanYouReadThisText\");\n      \n          if (backgroundColor) {\n              previewText.style.backgroundColor = backgroundColor;\n          }\n      \n          if (textColor) {\n              previewText.style.color = textColor;\n          }\n      \n          this._selectedBackgroundColor = backgroundColor || this._selectedBackgroundColor;\n          this._selectedTextColor = textColor || this._selectedTextColor;\n      }\n\n      onSaveButtonPress() {\n          const allElements = document.querySelectorAll(\"*\");\n      \n          allElements.forEach((element) => {\n              if (this._selectedBackgroundColor) {\n                  element.style.backgroundColor = this._selectedBackgroundColor;\n              }\n              if (this._selectedTextColor) {\n                  element.style.color = this._selectedTextColor;\n              }\n          });\n      \n          MessageToast.show(\"Changes applied successfully!\");\n      }\n      \n      onCancelButtonPress() {\n          const previewText = document.getElementById(\"idCanYouReadThisText\");\n          previewText.style.backgroundColor = \"\";\n          previewText.style.color = \"\";\n      \n          this._selectedBackgroundColor = null;\n          this._selectedTextColor = null;\n      \n          MessageToast.show(\"Changes canceled.\");\n      }\n      \n      onButtonContrastResetPress() {\n          const allElements = document.querySelectorAll(\"*\");\n      \n          allElements.forEach((element) => {\n              element.style.backgroundColor = \"\";\n              element.style.color = \"\";\n          });\n      \n          MessageToast.show(\"All styles reset to default!\");\n      }\n      \n\n\n\n\n\n      //Contrast Mode End\n\n\n  }\n\n  var _package = BFSG_Popover;\n\n  let exp = _package?.default || _package || { __emptyModule: true };try { Object.defineProperty(exp, \"__\" + \"esModule\", { value: true }); exp.default = exp; } catch (ex) {}\n\n  return exp;\n\n}));\n"
    }
  ]
}